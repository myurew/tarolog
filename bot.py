import logging
import sys
import asyncio
import random
import os
from aiogram import Bot, Dispatcher
from aiogram.types import Message, CallbackQuery, FSInputFile
from aiogram.filters import Command
from aiogram.utils.keyboard import InlineKeyboardBuilder
from aiogram.enums import ParseMode

# === –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ===
BOT_TOKEN = "your_bot_token"  # ‚Üê –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
IMAGE_PATH = "cards"

# === –î–∞–Ω–Ω—ã–µ: –∫–∞—Ä—Ç—ã –∏ –æ–ø–∏—Å–∞–Ω–∏—è ===
DAILY_CARDS = {
    "–°—É–¥": (
        "–°–µ–≥–æ–¥–Ω—è –≤—ã –º–æ–∂–µ—Ç–µ —Ä–µ—à–∏—Ç—å —Å–≤–æ—é –ø—Ä–æ–±–ª–µ–º—É ‚Äî —Ö–æ—Ç—å —Ç–æ–ª—å–∫–æ —á—Ç–æ –≤–æ–∑–Ω–∏–∫—à—É—é, —Ö–æ—Ç—å –∑–∞—Å—Ç–∞—Ä–µ–ª—É—é.\n"
        "–ü—Ä–æ—Å—Ç–æ –¥–µ—Ä–∂–∏—Ç–µ –≥–ª–∞–∑–∞ –æ—Ç–∫—Ä—ã—Ç—ã–º–∏, —á—Ç–æ–±—ã –Ω–µ —É–ø—É—Å—Ç–∏—Ç—å —ç—Ç—É –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å.\n"
        "–í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –∏ –Ω–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å, ‚Äî —Ç–æ–ª—å–∫–æ –∂–¥–∞—Ç—å.\n\n"
        "–•–æ—Ç—è –∏–Ω–æ–≥–¥–∞, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –±—ã–≤–∞–µ—Ç –Ω—É–∂–µ–Ω –Ω–µ–±–æ–ª—å—à–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ç–æ–ª—á–æ–∫.",
        "sud.jpg"
    ),
    "–î—å—è–≤–æ–ª": (
        "–•–æ—Ç—è —á–µ—Ä—Ç –∏ –Ω–µ —Ç–∞–∫ —Å—Ç—Ä–∞—à–µ–Ω, –∫–∞–∫ –µ–≥–æ –º–∞–ª—é—é—Ç, –æ–¥–Ω–∞–∫–æ —Å–µ–≥–æ–¥–Ω—è –≤–∞–º, –≤–∏–¥–∏–º–æ, –ø—Ä–∏–¥–µ—Ç—Å—è –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è —Å —Ç–µ–Ω–µ–≤–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π —Å–≤–æ–µ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞.\n"
        "–í–æ–∑–º–æ–∂–Ω–æ, –≤–∞—Å –±—É–¥—É—Ç —Å–∫–ª–æ–Ω—è—Ç—å –∫ –∫–∞–∫–æ–º—É-—Ç–æ –Ω–µ–±–ª–∞–≥–æ–≤–∏–¥–Ω–æ–º—É –ø–æ—Å—Ç—É–ø–∫—É –∏–ª–∏ –∫ –∏–∑–º–µ–Ω–µ —Å–≤–æ–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º.\n\n"
        "–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏ –∫–∞–∫–æ–µ-—Ç–æ –≤–Ω–µ–∑–∞–ø–Ω–æ–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø–æ–±—É–∂–¥–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã –∑–∞ —Å–æ–±–æ–π –Ω–µ –ø–æ–¥–æ–∑—Ä–µ–≤–∞–ª–∏ (–∏–ª–∏ –¥—É–º–∞–ª–∏, —á—Ç–æ –¥–∞–≤–Ω–æ –ø—Ä–µ–æ–¥–æ–ª–µ–ª–∏ –µ–≥–æ) ‚Äî –∑–∞–≤–∏—Å—Ç—å, —Ä–µ–≤–Ω–æ—Å—Ç—å, –∞–ª—á–Ω–æ—Å—Ç—å –∏–ª–∏ –∂–∞–∂–¥–∞ –≤–ª–∞—Å—Ç–∏.\n"
        "–ù–µ —Å—Ç–æ–∏—Ç –Ω–∏ –∑–ª–∏—Ç—å—Å—è –Ω–∞ —Å–µ–±—è –∑–∞ —ç—Ç–æ, –Ω–∏ –≤–∑–≤–∞–ª–∏–≤–∞—Ç—å –≤–∏–Ω—É –Ω–∞ –¥—Ä—É–≥–∏—Ö, –∫–∞–∫ –Ω–µ —Å—Ç–æ–∏—Ç –∏ –ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–¥–∞–≤–∏—Ç—å –≤ —Å–µ–±–µ —ç—Ç–æ –ø–æ–±—É–∂–¥–µ–Ω–∏–µ.",
        "dyavol.jpg"
    ),
    "–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã": (
        "–ë—ã–≤–∞—é—Ç –¥–Ω–∏, –∫–æ–≥–¥–∞ –º—ã –¥–æ–ª–∂–Ω—ã –ø–æ–∫–æ—Ä–∏—Ç—å—Å—è –Ω–µ–∏–∑–±–µ–∂–Ω–æ–º—É.\n"
        "–ï—Å–ª–∏ –≤—ã –æ—â—É—â–∞–µ—Ç–µ, —á—Ç–æ —Å–æ–±—ã—Ç–∏—è –Ω–∞–¥–≤–∏–≥–∞—é—Ç—Å—è –Ω–µ—É–º–æ–ª–∏–º–æ, —Ç–æ –∏ –¥–∞–π—Ç–µ –∏–º –ø—Ä–æ–∏–∑–æ–π—Ç–∏.\n"
        "–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ —É –∫–∞–∂–¥–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –µ—Å—Ç—å —Å–≤–æ–π —Å–º—ã—Å–ª, –¥–∞–∂–µ –µ—Å–ª–∏ –æ—Ç –Ω–∞—Å –æ–Ω –µ—â–µ —Å–∫—Ä—ã—Ç.\n\n"
        "–¢–∞–∫ —á—Ç–æ –≤–ø–æ–ª–Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ, —á—Ç–æ –∏ –¥–ª—è –≤–∞—Å –≤ –∫–æ–Ω—Ü–µ –∫–æ–Ω—Ü–æ–≤ –≤—Å–µ –æ–±–µ—Ä–Ω–µ—Ç—Å—è –∫ –ª—É—á—à–µ–º—É.",
        "koleso_fortuny.jpg"
    )
}

YES_NO_ANSWERS = [
    "–û—Ç–≤–µ—Ç –Ω–∞ —Ç–≤–æ–π –≤–æ–ø—Ä–æ—Å, –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –¥–∞!",
    "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–µ—Ç!"
]

LOVE_LAYOUTS = {
    "–û—Ç–Ω–æ—à–µ–Ω–∏—è": (
        "–ë—É–¥—É—â–µ–µ —Å –∑–∞–≥–∞–¥–∞–Ω–Ω—ã–º –º—É–∂—á–∏–Ω–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º. –û–Ω–æ –æ–∫—É—Ç–∞–Ω–æ —Ç–∞–π–Ω–æ–π. –£–≤—ã, –Ω–æ –±—É–¥—É—â–µ–µ —Å —ç—Ç–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º –Ω–µ –ø—Ä–∏–Ω–µ—Å—ë—Ç –≤–∞–º —Å—á–∞—Å—Ç—å—è. "
        "–û–Ω –≤–∞—Å –Ω–µ –ª—é–±–∏—Ç –∏–ª–∏ –∂–µ –æ–∫–∞–∂–µ—Ç—Å—è –Ω–µ —Ç–µ–º, –∑–∞ –∫–æ–≥–æ —Å–µ–±—è –≤—ã–¥–∞—ë—Ç. –î–æ–≤–µ—Ä—è—Ç—å –µ–º—É –Ω–µ–ª—å–∑—è. –¢–∞–∫–∏–µ –ª—é–¥–∏ –æ–±—ã—á–Ω–æ —Å—Ç—Ä–µ–º—è—Ç—Å—è –∫ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–µ—Å–∞–º, "
        "–Ω–µ –æ–±—Ä–∞—â–∞—è –≤–Ω–∏–º–∞–Ω–∏—è –Ω–∞ —á—É–≤—Å—Ç–≤–∞ –¥—Ä—É–≥–∏—Ö. –û–Ω–∏ –º–æ–≥—É—Ç –ª–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤–∞–º –∏ –æ—Å—Ç–∞–≤–∏—Ç—å –≤–∞—Å –Ω–∞–µ–¥–∏–Ω–µ —Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏. –ù–µ —Å—Ç–æ–∏—Ç –∂–¥–∞—Ç—å –æ—Ç —Ç–∞–∫–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ —á–µ—Å—Ç–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–µ–¥–∞–Ω–Ω–æ—Å—Ç–∏. "
        "–í–∞—à–∞ –∂–∏–∑–Ω—å –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—Ç–∞–Ω–Ω–æ–π –∏ –ø–æ–ª–Ω–æ–π —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–π, –µ—Å–ª–∏ –≤—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å –Ω–∏–º. –õ—É—á—à–µ –Ω–∞–π—Ç–∏ –∫–æ–≥–æ-—Ç–æ, –∫—Ç–æ –±—É–¥–µ—Ç –∏—Å–∫—Ä–µ–Ω–Ω–µ –≤–∞—Å –ª—é–±–∏—Ç—å –∏ –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ –≤–∞—Å.",
        "otnosheniya.jpg"
    ),
    "–ß—É–≤—Å—Ç–≤–∞": (
        "–ö–∞—Ä—Ç—ã –≥–æ–≤–æ—Ä—è—Ç –æ —Ç–æ–º, —á—Ç–æ –æ–Ω –≤–∏–¥–∏—Ç –≤ –≤–∞—Å –≤—Ç–æ—Ä—É—é –ø–æ–ª–æ–≤–∏–Ω–∫—É –∏ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –±–µ–∑ –≤–∞—Å —Å–≤–æ—é –∂–∏–∑–Ω—å. –ï–≥–æ —á—É–≤—Å—Ç–≤–∞ –∫ –≤–∞–º –≥–ª—É–±–æ–∫–∏ –∏ –∏—Å–∫—Ä–µ–Ω–Ω–∏. "
        "–ú–µ–∂–¥—É –≤–∞–º–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∫—Ä–µ–ø–∫–∞—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–≤—è–∑—å, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–ª–µ–≥–∫–æ —Ä–∞–∑–æ—Ä–≤–∞—Ç—å. –û–Ω —Ü–µ–Ω–∏—Ç –≤–∞—à—É –ø–æ–¥–¥–µ—Ä–∂–∫—É, –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –∑–∞–±–æ—Ç—É. "
        "–¢–æ–ª—å–∫–æ –ª–∏—à—å —Å –≤–∞–º–∏ –º—É–∂—á–∏–Ω–∞ –º–æ–∂–µ—Ç –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–∞–º—ã–º —Å–æ–∫—Ä–æ–≤–µ–Ω–Ω—ã–º. –í –µ–≥–æ —Å–µ—Ä–¥—Ü–µ –≤—ã –∑–∞–Ω–∏–º–∞–µ—Ç–µ –æ—Å–æ–±–æ–µ –º–µ—Å—Ç–æ. "
        "–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ª—é–±—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è, —Å—Å–æ—Ä—ã –∏–ª–∏ –Ω–µ–¥–æ–ø–æ–Ω–∏–º–∞–Ω–∏—è, –µ–≥–æ –ª—é–±–æ–≤—å –∫ –≤–∞–º –Ω–µ —É–≥–∞—Å–Ω–µ—Ç. –û–Ω –≥–æ—Ç–æ–≤ –∏–¥—Ç–∏ –Ω–∞ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã –∏ –ø—Ä–∏–ª–∞–≥–∞—Ç—å —É—Å–∏–ª–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∞—à–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π. "
        "–í –±—É–¥—É—â–µ–º –≤–∞—Å –∂–¥—ë—Ç –º–Ω–æ–≥–æ —Å—á–∞—Å—Ç–ª–∏–≤—ã—Ö –∏ —Ä–∞–¥–æ—Å—Ç–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤ –≤–º–µ—Å—Ç–µ. –î–æ–≤–µ—Ä—è–π—Ç–µ —Å–≤–æ–µ–π –∏–Ω—Ç—É–∏—Ü–∏–∏ –∏ —á—É–≤—Å—Ç–≤–∞–º. –û–Ω–∏ –Ω–µ –æ–±–º–∞–Ω—ã–≤–∞—é—Ç –≤–∞—Å.",
        "chuvstva.jpg"
    ),
    "–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞": (
        "–ù–∞—á–∞–ª–æ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –æ—á–µ–Ω—å –≤–µ—Ä–æ—è—Ç–Ω–æ, –µ—Å–ª–∏ –≤—ã —Ä–µ—à–∏—Ç–µ—Å—å —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–π —à–∞–≥. –ù–µ –±–æ–π—Ç–µ—Å—å –ø—Ä–æ—è–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É. "
        "–ò–Ω–æ–≥–¥–∞ –ø–µ—Ä–≤—ã–π —à–∞–≥ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ –ø—Ä–æ—Å—Ç—ã–º –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ–º, —Ç–∞–∫ –∏ –±–æ–ª–µ–µ —Å–µ—Ä—å—ë–∑–Ω—ã–º –∂–µ—Å—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –≤—ã—Ä–∞–∂–∞–µ—Ç –Ω–∞—à–∏ —á—É–≤—Å—Ç–≤–∞. "
        "–í–∞–∂–Ω–æ –æ—Å–æ–∑–Ω–∞–≤–∞—Ç—å, —á—Ç–æ –ª—é–±–æ–≤—å —Ç—Ä–µ–±—É–µ—Ç –æ—Ç –Ω–∞—Å —É—Å–∏–ª–∏–π –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ —Ä–∏—Å–∫—É, –Ω–æ –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ –º–æ–º–µ–Ω—Ç—ã –¥–µ–ª–∞—é—Ç –Ω–∞—à–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –±–æ–ª–µ–µ —Ü–µ–Ω–Ω—ã–º–∏ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º–∏. "
        "–ù–µ —Å—Ç–æ–∏—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å —Å–µ–±—è —Å—Ç—Ä–∞—Ö–æ–º –∏–ª–∏ —Å–æ–º–Ω–µ–Ω–∏—è–º–∏ ‚Äî –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π —ç—Ç–∞–ø –≤ –Ω–∞—à–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–¥ –Ω–∞–º–∏ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–æ—Å—Ç–∞ –∏ —Ä–∞–∑–≤–∏—Ç–∏—è. "
        "–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–∞ –º–æ–∂–µ—Ç –ø—Ä–æ—è–≤–ª—è—Ç—å—Å—è –≤ —Å–∞–º—ã—Ö —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ö, –∏ –≥–ª–∞–≤–Ω–æ–µ ‚Äî —ç—Ç–æ –±—ã—Ç—å –∏—Å–∫—Ä–µ–Ω–Ω–∏–º–∏ –∏ –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ —Å–≤–æ–∏—Ö —á—É–≤—Å—Ç–≤.",
        "perspektiva.jpg"
    )
}

WORK_LAYOUTS = {
    "–†–∞—Å–∫–ª–∞–¥ –ø–µ—Ä–≤—ã–π": (
        "–®–µ—Å—Ç–µ—Ä–∫–∞ –ú–µ—á–µ–π —Ç–æ–ª–∫—É–µ—Ç—Å—è –∫–∞–∫ —É–º–µ–Ω–∏–µ —Å–ª–∞–∂–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–µ, –∫–∞–∫ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å –≤ —Ä–∞–±–æ—Ç–µ –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏–¥–µ–∏ –∏ –º–µ—Ç–æ–¥—ã, "
        "–∞ —Ç–∞–∫–∂–µ –∫–∞–∫ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –º—ã—Å–ª–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ, –º–∞—Å—à—Ç–∞–±–Ω–æ. –≠—Ç–æ—Ç –ê—Ä–∫–∞–Ω –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç —É–¥–∞—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –≤–ø–æ–ª–Ω–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö, —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã—Ö –∑–∞–¥–∞—á. "
        "–ß–µ–ª–æ–≤–µ–∫, –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã–ø–∞–ª —Ç–∞–∫–æ–π –ê—Ä–∫–∞–Ω, –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –Ω–∞–π–¥–µ—Ç —Å–µ–±—è –≤ —Å–µ—Ç–µ–≤–æ–º –±–∏–∑–Ω–µ—Å–µ, —Å–º–æ–∂–µ—Ç –Ω–µ–º–∞–ª–æ –¥–æ—Å—Ç–∏—á—å –Ω–∞ –Ω–∞—É—á–Ω–æ–º –ø–æ–ø—Ä–∏—â–µ. "
        "–ï—â–µ –æ–¥–Ω–æ –æ—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –®–µ—Å—Ç–µ—Ä–∫–∏ –ú–µ—á–µ–π ‚Äì —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Å–µ–±—è, –Ω–µ–ø—Ä–∏—è—Ç–∏–µ —Ä–∞–±–æ—Ç—ã –ø–æ –Ω–∞–π–º—É. "
        "–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –≤–ø–æ–ª–Ω–µ –º–æ–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å —Å–≤–æ–±–æ–¥–Ω–æ–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö—É–¥–æ–∂–Ω–∏–∫–∞ –∏–ª–∏ –ø–∏—Å–∞—Ç–µ–ª—è.",
        "rasclad1.jpg"
    ),
    "–†–∞—Å–∫–ª–∞–¥ –≤—Ç–æ—Ä–æ–π": (
        "–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–µ–¥–≤–µ—â–∞–µ—Ç —Ç–≤–æ—Ä—á–µ—Å–∫—É—é —Ä–∞–±–æ—Ç—É –∏–ª–∏ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—É—é –¥–æ–ª–∂–Ω–æ—Å—Ç—å. –î–ª—è —Ç–æ–≥–æ, –∫–æ–º—É –ø–æ—Ä—É—á–µ–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—á–µ–Ω—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, "
        "—ç—Ç–∞ –∫–∞—Ä—Ç–∞ —Å–ª—É–∂–∏—Ç –∑–Ω–∞–∫–æ–º –æ—á–µ–Ω—å –¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω–æ–≥–æ –∏ –ø–ª–æ–¥–æ—Ç–≤–æ—Ä–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å—Ç–æ—è—â–∏—Ö –∑–∞–¥–∞—á. –ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞ –º–æ–∂–µ—Ç —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤–æ–≤–∞—Ç—å –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è —Å–≤–æ–∏—Ö —Ç–∞–ª–∞–Ω—Ç–æ–≤, "
        "–æ –ø–æ–≤—ã—à–µ–Ω–∏–∏ –∑–∞—Ä–ø–ª–∞—Ç—ã, –æ –ø—Ä–∏—è—Ç–Ω—ã—Ö –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏—è—Ö –∏ –ø–µ—Ä–µ–º–µ–Ω–∞—Ö –Ω–∞ —Ä–∞–±–æ—á–µ–º –º–µ—Å—Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å–≤—è–∑–∞–Ω—ã —Å –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–π —Å—Ñ–µ—Ä–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–º–æ–Ω—Ç –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ, "
        "–∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—á–µ–≥–æ –≥—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–π –∏ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π –∏ —Ç.–¥.)",
        "rasclad2.jpg"
    ),
    "–†–∞—Å–∫–ª–∞–¥ —Ç—Ä–µ—Ç–∏–π": (
        "–ß–µ—Ç–≤–µ—Ä–∫–∞ –ú–µ—á–µ–π –≤ –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–æ–º –≤–∏–¥–µ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é, –∫–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –æ–∫–∞–∑–∞–ª—Å—è —Å–æ–≤—Å–µ–º –Ω–µ –≤ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è –≤ –æ—Ç–Ω—é–¥—å –Ω–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–º –º–µ—Å—Ç–µ, "
        "–¥–∞ –µ—â–µ –∏ —Å –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–∏–º–∏ –ª—é–¥—å–º–∏. –ò –∏–º–µ–Ω–Ω–æ —ç—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–æ–π –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–∫–æ—è (–ø–∞—Å—Å–∏–≤–Ω–æ—Å—Ç–∏, –ø—Ä–∏–≤—ã—á–Ω–æ–π –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ—Å—Ç–∏ –∏ —Ç.–ø.). "
        "–ö–æ–≥–¥–∞ –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∞—è –ß–µ—Ç–≤–µ—Ä–∫–∞ –ú–µ—á–µ–π –æ–ø–∏—Å—ã–≤–∞–µ—Ç —á–µ–ª–æ–≤–µ–∫–∞, —Ç–æ –µ–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Äì —Ä–∞—Å—Ö–ª—è–±–∞–Ω–Ω–æ—Å—Ç—å, –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ, —Å–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å –≤ –º—ã—Å–ª—è—Ö.\n\n"
        "–°—Ç–∞–±–∏–ª—å–Ω—ã–π –º–∏—Ä–æ–∫, —Å–µ–º—å—è –∏ –¥—Ä—É–∑—å—è —Å–Ω–æ–≤–∞ –¥–∞—é—Ç –≤–∞–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–≤–æ–∏ —Å–∏–ª—ã. –ë—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã –∏ –±–ª–∞–≥–æ—Ä–∞–∑—É–º–Ω—ã, –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ —ç—Ç–æ–π –ø–æ–º–æ—â–∏ –º–æ–∂–µ—Ç –Ω–µ —Ö–≤–∞—Ç–∏—Ç—å. "
        "–í–æ–∫—Ä—É–≥ –≤–∞—Å –∏ –≤–∞—à–∏—Ö –¥–µ–ª —Å–∏—Ç—É–∞—Ü–∏—è –Ω–∞–∫–∞–ª—è–µ—Ç—Å—è.",
        "rasclad3.jpg"
    )
}

WISH_RESPONSES = [
    ("–¢–≤–æ—ë –∂–µ–ª–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–±—É–¥–µ—Ç—Å—è!", "wish_yes.jpg"),
    ("–¢–≤–æ—ë –∂–µ–ª–∞–Ω–∏–µ —Å–±—É–¥–µ—Ç—Å—è, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–∏–ª–æ–∂–∏—Ç—å —É—Å–∏–ª–∏—è –¥–ª—è –µ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è", "wish_maybe.jpg"),
    ("–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Ç–≤–æ—ë –∂–µ–ª–∞–Ω–∏–µ –Ω–µ —Å–±—É–¥–µ—Ç—Å—è, —Ç—Ä—É–¥–∏—Å—å –¥–∞–ª—å—à–µ!", "wish_no.jpg")
]

# === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ===
bot = Bot(token=BOT_TOKEN)
dp = Dispatcher()

# === –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ===
def main_menu():
    builder = InlineKeyboardBuilder()
    builder.button(text="üé¥ –ö–∞—Ä—Ç–∞ –¥–Ω—è", callback_data="card_of_day")
    builder.button(text="‚ùì –ë—ã—Å—Ç—Ä—ã–π –≤–æ–ø—Ä–æ—Å (–î–∞/–ù–µ—Ç)", callback_data="yes_no")
    builder.button(text="‚ù§Ô∏è –õ—é–±–æ–≤–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥", callback_data="love_layout")
    builder.button(text="‚ú® –†–∞—Å–∫–ª–∞–¥ –Ω–∞ –∂–µ–ª–∞–Ω–∏–µ", callback_data="wish_layout")
    builder.button(text="üíº –†–∞—Å–∫–ª–∞–¥ –Ω–∞ —Ä–∞–±–æ—Ç—É/–¥–µ–Ω—å–≥–∏", callback_data="work_layout")
    builder.button(text="üìû –°–≤—è–∑–∞—Ç—å—Å—è —Å —Ç–∞—Ä–æ–ª–æ–≥–æ–º", callback_data="contact")
    builder.adjust(2, 2, 1, 2)
    return builder.as_markup()

# === /start ===
@dp.message(Command("start"))
async def cmd_start(message: Message):
    await message.answer("üîÆ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –¢–∞—Ä–æ-–±–æ—Ç–∞!\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=main_menu())

# === –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ ===
@dp.callback_query(lambda c: c.data == "card_of_day")
async def card_of_day(callback: CallbackQuery):
    await callback.answer()
    name = random.choice(list(DAILY_CARDS.keys()))
    desc, img = DAILY_CARDS[name]
    path = os.path.join(IMAGE_PATH, img)
    if os.path.isfile(path):
        await callback.message.answer_photo(
            photo=FSInputFile(path),
            caption=f"üé¥ <b>{name}</b>\n\n{desc}",
            parse_mode=ParseMode.HTML
        )
    else:
        await callback.message.answer(f"üé¥ <b>{name}</b>\n\n{desc}", parse_mode=ParseMode.HTML)
    await callback.message.answer("–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=main_menu())

@dp.callback_query(lambda c: c.data == "yes_no")
async def yes_no_question(callback: CallbackQuery):
    await callback.answer()
    await callback.message.answer("–ó–∞–¥–∞–π—Ç–µ –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å –º—ã—Å–ª–µ–Ω–Ω–æ, –∞ —è –æ—Ç–≤–µ—á—É ¬´–î–∞¬ª –∏–ª–∏ ¬´–ù–µ—Ç¬ª.")
    await asyncio.sleep(20)
    ans = random.choice(YES_NO_ANSWERS)
    await callback.message.answer(f"üîÆ {ans}")
    await callback.message.answer("–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=main_menu())

@dp.callback_query(lambda c: c.data == "love_layout")
async def love_layout_menu(callback: CallbackQuery):
    await callback.answer()
    builder = InlineKeyboardBuilder()
    for key in LOVE_LAYOUTS:
        builder.button(text=key, callback_data=f"love_{key}")
    builder.button(text="‚Üê –ù–∞–∑–∞–¥", callback_data="back")
    builder.adjust(1)
    await callback.message.edit_text("–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–∑–∏—Ü–∏—é –≤ –ª—é–±–æ–≤–Ω–æ–º —Ä–∞—Å–∫–ª–∞–¥–µ:", reply_markup=builder.as_markup())

@dp.callback_query(lambda c: c.data.startswith("love_"))
async def send_love_layout(callback: CallbackQuery):
    await callback.answer()
    key = callback.data[5:]  # —É–±–∏—Ä–∞–µ–º "love_"
    if key in LOVE_LAYOUTS:
        desc, img = LOVE_LAYOUTS[key]
        path = os.path.join(IMAGE_PATH, img)
        if os.path.isfile(path):
            await callback.message.answer_photo(
                photo=FSInputFile(path),
                caption=f"‚ù§Ô∏è <b>{key}</b>\n\n{desc}",
                parse_mode=ParseMode.HTML
            )
        else:
            await callback.message.answer(f"‚ù§Ô∏è <b>{key}</b>\n\n{desc}", parse_mode=ParseMode.HTML)
    await callback.message.answer("–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=main_menu())

@dp.callback_query(lambda c: c.data == "work_layout")
async def work_layout(callback: CallbackQuery):
    await callback.answer()
    name = random.choice(list(WORK_LAYOUTS.keys()))
    desc, img = WORK_LAYOUTS[name]
    path = os.path.join(IMAGE_PATH, img)
    if os.path.isfile(path):
        await callback.message.answer_photo(
            photo=FSInputFile(path),
            caption=f"üíº <b>{name}</b>\n\n{desc}",
            parse_mode=ParseMode.HTML
        )
    else:
        await callback.message.answer(f"üíº <b>{name}</b>\n\n{desc}", parse_mode=ParseMode.HTML)
    await callback.message.answer("–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=main_menu())

@dp.callback_query(lambda c: c.data == "wish_layout")
async def wish_layout(callback: CallbackQuery):
    await callback.answer()
    await callback.message.answer("‚ú® –ó–∞–≥–∞–¥–∞–π—Ç–µ —Å–≤–æ—ë –∂–µ–ª–∞–Ω–∏–µ –º—ã—Å–ª–µ–Ω–Ω–æ...")
    await asyncio.sleep(20)
    desc, img = random.choice(WISH_RESPONSES)
    path = os.path.join(IMAGE_PATH, img)
    if os.path.isfile(path):
        await callback.message.answer_photo(
            photo=FSInputFile(path),
            caption=f"‚ú® {desc}",
            parse_mode=ParseMode.HTML
        )
    else:
        await callback.message.answer(f"‚ú® {desc}")
    await callback.message.answer("–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=main_menu())

@dp.callback_query(lambda c: c.data == "contact")
async def contact_tarologist(callback: CallbackQuery):
    await callback.answer()
    await callback.message.answer("–í—ã –º–æ–∂–µ—Ç–µ —Å–≤—è–∑–∞—Ç—å—Å—è —Å —Ç–∞—Ä–æ–ª–æ–≥–æ–º –Ω–∞–ø—Ä—è–º—É—é –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–µ:\n\nüì± +79782147666")
    await callback.message.answer("–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=main_menu())

@dp.callback_query(lambda c: c.data == "back")
async def back_to_menu(callback: CallbackQuery):
    await callback.answer()
    await callback.message.edit_text("üîÆ –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:", reply_markup=main_menu())

# === –ó–∞–ø—É—Å–∫ ===
async def main():
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–∞ –¥–ª—è aiogram (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ)
    logging.basicConfig(level=logging.INFO, stream=sys.stdout)

    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
    print("‚úÖ –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...")
    print("‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Telegram...")

    try:
        # –£–¥–∞–ª—è–µ–º –≤–µ–±—Ö—É–∫ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º polling
        print("üîÑ –£–¥–∞–ª–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–∞...")
        await bot.delete_webhook(drop_pending_updates=True)
        print("‚úÖ –í–µ–±—Ö—É–∫ —É–¥–∞–ª–µ–Ω, –∑–∞–ø—É—Å–∫ polling...")
        
        await dp.start_polling(bot)
    except KeyboardInterrupt:
        print("\nüõë –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤—Ä—É—á–Ω—É—é.")
    except Exception as e:
        print(f"‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞: {e}")
    finally:
        await bot.session.close()

if __name__ == "__main__":
    asyncio.run(main())
